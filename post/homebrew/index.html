<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Homebrew | iKulkix</title>
<link rel="shortcut icon" href="https://ikulkix.github.io/favicon.ico?v=1608219351247">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://ikulkix.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="Homebrew | iKulkix - Atom Feed" href="https://ikulkix.github.io/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="HomebrewCN：Ruby&amp;Node.js
1.Homebrew
macOS（或 Linux）缺失的软件包的管理器（国内源）,使用 Homebrew 安装 Apple（或您的 Linux 系统）没有预装但 你需要的东西。
1.2..." />
    <meta name="keywords" content="Ruby,Node.js,macOS,Homebrew" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://ikulkix.github.io">
  <img class="avatar" src="https://ikulkix.github.io/images/avatar.png?v=1608219351247" alt="">
  </a>
  <h1 class="site-title">
    iKulkix
  </h1>
  <p class="site-description">
    以梦为马
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu">
          归档
        </a>
      
    
      
        <a href="/tags" class="menu">
          标签
        </a>
      
    
      
        <a href="/post/about" class="menu">
          关于
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Homebrew
            </h2>
            <div class="post-info">
              <span>
                2020-08-11
              </span>
              <span>
                4 min read
              </span>
              
                <a href="https://ikulkix.github.io/tag/LGVTRayuO/" class="post-tag">
                  # Ruby
                </a>
              
                <a href="https://ikulkix.github.io/tag/_gKwRFqLEB/" class="post-tag">
                  # Node.js
                </a>
              
                <a href="https://ikulkix.github.io/tag/gXaTMPO64z/" class="post-tag">
                  # macOS
                </a>
              
                <a href="https://ikulkix.github.io/tag/tcacAXxF2/" class="post-tag">
                  # Homebrew
                </a>
              
            </div>
            
              <img class="post-feature-image" src="https://cdn.jsdelivr.net/gh/ikulkix/oss@main/uPic/christin-hume-08tX2fsuSLg-unsplash.jpg" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <p><em>HomebrewCN：Ruby&amp;Node.js</em></p>
<h1 id="1homebrew">1.Homebrew</h1>
<p><em>macOS（或 Linux）缺失的软件包的管理器（国内源）,使用 Homebrew 安装 Apple（或您的 Linux 系统）没有预装但 你需要的东西。</em></p>
<h2 id="12安装脚本">1.2.安装脚本：</h2>
<pre><code>/bin/zsh -c &quot;$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)&quot;
</code></pre>
<h2 id="13卸载脚本">1.3.卸载脚本：</h2>
<pre><code>/bin/zsh -c &quot;$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/HomebrewUninstall.sh)&quot;
</code></pre>
<h2 id="14相关文章">1.4.相关文章</h2>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/111014448">Homebrew国内地址自动安装</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/161680238">开源软件国内镜像源对比</a></li>
</ul>
<h1 id="2-升级ruby">2. 升级Ruby</h1>
<p>通过HomeBrew来升级Ruby，复制下面这句到终端回车即可</p>
<pre><code>/bin/zsh -c &quot;$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/UpdateRuby.sh)&quot;
</code></pre>
<p>继续完成下面两步操作即可：</p>
<ol>
<li>在访达按下组合键shift+cmd+g输入后回车</li>
</ol>
<pre><code>/usr/local/etc/openssl@1.1/
</code></pre>
<ol start="2">
<li>双击cert.pem文件，安装到钥匙串(系统)后，在终端运行下面代码：</li>
</ol>
<pre><code>/usr/local/opt/openssl@1.1/bin/c_rehash
</code></pre>
<h1 id="3nodejs">3.Node.js</h1>
<h2 id="31卸载节点">3.1.卸载节点</h2>
<h3 id="311homebrew安装">3.1.1.homebrew安装</h3>
<pre><code>brew uninstall node
</code></pre>
<h3 id="312官网pkg安装">3.1.2.官网pkg安装</h3>
<pre><code>sudo rm -rf /usr/local/{bin/{node,npm},lib/node_modules/npm,lib/node,share/man/*/node.*}
</code></pre>
<h3 id="313其他">3.1.3.其他</h3>
<pre><code>lsbom -f -l -s -pf /var/db/receipts/org.nodejs.pkg.bom \| while read i; do sudo rm /usr/local/${i}done

sudo rm -rf /usr/local/lib/node \

    /usr/local/lib/node_modules \

    /var/db/receipts/org.nodejs.*
</code></pre>
<p><strong>提示：</strong></p>
<p>这些东西删完了，node就算删除了。</p>
<p>但是还有好多基于节点安装的一堆软件和命令行工具，也需要重新安装，例如react-native，supervisor，pm2等</p>
<p>需要删除/usr/local/bin以下相关的文件，实际上它们只是些些软连接，正主都在/usr/local/lib/node_modules/目录下。</p>
<p>在之前的步骤中，已经被删除了，但是按tab键还能找到，就是因为这些软连接还存在</p>
<h2 id="32安装">3.2.安装</h2>
<p>安装节点</p>
<pre><code>brew install node
</code></pre>
<p>安装后有可能在终端中输入node找到该命令，执行如下命令</p>
<pre><code>brew link node
</code></pre>
<p>得到如下结果</p>
<pre><code>Linking /usr/local/Cellar/node/15.4.0... 
Error: Could not symlink include/node/common.gypi
Target /usr/local/include/node/common.gypi
already exists. You may want to remove it:
  rm '/usr/local/include/node/common.gypi'

To force the link and overwrite all conflicting files:
  brew link --overwrite node

To list all files that would be deleted:
  brew link --overwrite --dry-run node
</code></pre>
<p>上面的错误指出有一些文件已经存在，如果link node会冲突，需要你去删除这些文件</p>
<p>执行<code>brew link --overwrite node</code>会强制链接并覆盖所有冲突文件</p>
<p>执行<code>brew link --overwrite --dry-run node</code>会列出所有将被删除的文件</p>
<p>我们可以先执行一下<code>brew link --overwrite --dry-run node</code>看看需要删除某些文件</p>
<p>建议直接执行<code>brew link --overwrite node</code>强制链接并覆盖所有冲突文件</p>
<h2 id="cnpm">cnpm</h2>
<p>使用淘宝定制的 cnpm (gzip 压缩支持) 命令行工具代替默认的 npm:</p>
<pre><code>npm install -g cnpm --registry=https://registry.npm.taobao.org
</code></pre>
<h2 id="安装模块">安装模块</h2>
<p>从 registry.npm.taobao.org 安装所有模块. 当安装的时候发现安装的模块还没有同步过来, 淘宝 NPM 会自动在后台进行同步, 并且会让你从官方 NPM registry.npmjs.org 进行安装. 下次你再安装这个模块的时候, 就会直接从 淘宝 NPM 安装了.</p>
<pre><code>cnpm sync connect
</code></pre>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li><a href="#1homebrew">1.Homebrew</a>
<ul>
<li><a href="#12%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC">1.2.安装脚本：</a></li>
<li><a href="#13%E5%8D%B8%E8%BD%BD%E8%84%9A%E6%9C%AC">1.3.卸载脚本：</a></li>
<li><a href="#14%E7%9B%B8%E5%85%B3%E6%96%87%E7%AB%A0">1.4.相关文章</a></li>
</ul>
</li>
<li><a href="#2-%E5%8D%87%E7%BA%A7ruby">2. 升级Ruby</a></li>
<li><a href="#3nodejs">3.Node.js</a>
<ul>
<li><a href="#31%E5%8D%B8%E8%BD%BD%E8%8A%82%E7%82%B9">3.1.卸载节点</a>
<ul>
<li><a href="#311homebrew%E5%AE%89%E8%A3%85">3.1.1.homebrew安装</a></li>
<li><a href="#312%E5%AE%98%E7%BD%91pkg%E5%AE%89%E8%A3%85">3.1.2.官网pkg安装</a></li>
<li><a href="#313%E5%85%B6%E4%BB%96">3.1.3.其他</a></li>
</ul>
</li>
<li><a href="#32%E5%AE%89%E8%A3%85">3.2.安装</a></li>
<li><a href="#cnpm">cnpm</a></li>
<li><a href="#%E5%AE%89%E8%A3%85%E6%A8%A1%E5%9D%97">安装模块</a></li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="https://ikulkix.github.io/post/Hawking/">
              <h3 class="post-title">
                霍金
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="https://ikulkix.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
